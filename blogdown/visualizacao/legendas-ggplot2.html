---
title: "Legendas no ggplot2"
author: "Julio Trecenti, Daniel Falbel"
date: 2016-11-18
---


<!-- BLOGDOWN-BODY-BEFORE

/BLOGDOWN-BODY-BEFORE -->

<p>Começando de um simples boxplot feito no <code>ggplot2</code> vamos fazer diversas alterações nas legendas. O gráfico inicial é construido da seguinte forma:</p>
<pre class="r"><code>library(ggplot2)
# boxplot simples
bp &lt;- ggplot(data=PlantGrowth, aes(x=group, y=weight, fill=group)) + geom_boxplot()
bp</code></pre>
<p><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-2-1.png" width="60%" height="60%" /></p>
<div id="removendo-totalmente-a-legenda" class="section level2">
<h2>Removendo totalmente a legenda</h2>
<p>Existem diversas maneiras para remover a legenda de um gráfico no <code>ggplot2</code>. A forma mais simples é usar <code>guides(fill = FALSE)</code> com <code>fill</code> sendo o atributo gráfico do qual você deseja remover a legenda.</p>
<pre class="r"><code># aqui definimos fill = FALSE, porque é o atributo do gráfico que relacionamos 
# a alguma variável.
bp + guides(fill = FALSE)

# também é possível remover a legenda por meio da escala de cores
# aqui também usamos o scale_fill_discrete, porque associamos fill
# a uma variável anteriormente.
bp + scale_fill_discrete(guide = F)</code></pre>
<p><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-3-1.png" width="50%" height="60%" /><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-3-2.png" width="50%" height="60%" /></p>
<pre class="r"><code># o comando a seguir remove todas as legendas, não importa o atributo que ela
# esteja representando.
bp + theme(legend.position=&quot;none&quot;)</code></pre>
<p><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-4-1.png" width="60%" height="60%" /></p>
</div>
<div id="alterando-a-ordem-dos-itens" class="section level2">
<h2>Alterando a ordem dos itens</h2>
<p>Para alterar a ordem dos itens na legenda do gráfico no <code>ggplot2</code>, usamos o comando da escala de cores.</p>
<pre class="r"><code>bp + scale_fill_discrete(breaks=c(&quot;trt1&quot;,&quot;ctrl&quot;,&quot;trt2&quot;))</code></pre>
<p><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-5-1.png" width="60%" height="60%" /></p>
<pre class="r"><code>bp</code></pre>
<p><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-5-2.png" width="60%" height="60%" /></p>
<p>Dependendo de os aspectos gráficos (Ex: cores, formatos, preenchimentos) foram especificados você pode precisar usar alguma das seguintes funções: <code>scale_fill_manual</code>, <code>scale_colour_hue</code>, <code>scale_colour_manual</code>, <code>scale_shape_discrete</code>, <code>scale_linetype_discrete</code> , e assim por diante.</p>
<p>Você pode também querer inverter a ordem dos itens da legenda. Isso pode ser feito de uma das seguintes maneiras.</p>
<pre class="r"><code>bp + guides(fill = guide_legend(reverse=TRUE))
bp + scale_fill_discrete(guide = guide_legend(reverse=TRUE))</code></pre>
<p><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-6-1.png" width="50%" height="60%" /><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-6-2.png" width="50%" height="60%" /></p>
</div>
<div id="removendo-os-titulos-da-legenda" class="section level2">
<h2>Removendo os títulos da legenda</h2>
<p>Algumas vezes é necessário remover o título das legendas do gráfico feito no <code>ggplot2</code>. Veja a seguir algumas maneiras:</p>
<pre class="r"><code># Remove o título apenas da legenda do preenchimento (fill)
bp + guides(fill=guide_legend(title=NULL))

# Remove o título de todas as legendas
bp + theme(legend.title=element_blank())</code></pre>
<p><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-7-1.png" width="50%" height="60%" /><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-7-2.png" width="50%" height="60%" /></p>
</div>
<div id="modificando-texto-cores-e-rotulos" class="section level2">
<h2>Modificando texto, cores e rótulos</h2>
<p>Para modificar os textos e rótulos das legendas existem duas formas. Uma delas é modificar o <code>data.frame</code> de forma com que os fatores tenham o mesmo nome que você deseja na legenda. Outra forma é usando as funções de <code>scale</code>.</p>
<p>Veja algumas modificações que podem ser feitas por meio das funções de <code>scale</code>. Como a variável <code>group</code> está associada ao atributo <code>fill</code>, usamos as funções <code>scale_fill_xxx</code>.</p>
<pre class="r"><code># usamos scale_fill_discrete porque não queremos alterar as cores padrão,
# mas queremos que cada fator esteja associado a uma cor de tom diferente.
# mudamos aqui os rótulos e o título da legenda.
bp + scale_fill_discrete(name=&quot;Experimental\nCondition&quot;,
                         breaks=c(&quot;ctrl&quot;, &quot;trt1&quot;, &quot;trt2&quot;),
                         labels=c(&quot;Control&quot;, &quot;Treatment 1&quot;, &quot;Treatment 2&quot;))


# usamos scale_fill_manual porque queremos alterar as cores padrão.
# aqui escolhemos as cores da escala hexadecimal.
bp + scale_fill_manual(values=c(&quot;#999999&quot;, &quot;#E69F00&quot;, &quot;#56B4E9&quot;), 
                       name=&quot;Experimental\nCondition&quot;,
                       breaks=c(&quot;ctrl&quot;, &quot;trt1&quot;, &quot;trt2&quot;),
                       labels=c(&quot;Control&quot;, &quot;Treatment 1&quot;, &quot;Treatment 2&quot;))</code></pre>
<p><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-8-1.png" width="50%" height="60%" /><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-8-2.png" width="50%" height="60%" /></p>
<p>Veja que isso não aletrou o eixo X do gráfico.</p>
</div>
<div id="modificando-a-aparencia-da-legenda" class="section level2">
<h2>Modificando a aparência da legenda</h2>
<p>Existem inúmeras modificações que podem ser realizadas na aparência da legenda. Todas elas estão relacionadas à modificação do <code>element_text</code>. Veja neste <a href="http://docs.ggplot2.org/0.9.2.1/element_text.html">link</a> todos os atributos que podem ser modificados.</p>
<pre class="r"><code># Mudando a aparência do título
bp + theme(legend.title = element_text(colour=&quot;blue&quot;, size=16, face=&quot;bold&quot;))</code></pre>
<p><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-9-1.png" width="60%" height="60%" /></p>
<pre class="r"><code># Mudando a aparência dos rótulos
bp + theme(legend.text = element_text(colour=&quot;blue&quot;, size = 16, face = &quot;bold&quot;))</code></pre>
<p><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-10-1.png" width="60%" height="60%" /></p>
</div>
<div id="modificando-a-posicao-da-legenda" class="section level2">
<h2>Modificando a posição da legenda</h2>
<p>É possível controlar a posição da legenda facilmente escolhendo uma das posições (left/right/top/bottom).</p>
<pre class="r"><code>bp + theme(legend.position=&quot;top&quot;)</code></pre>
<p><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-11-1.png" width="60%" height="60%" /></p>
<p>Também é possível controlar a posição da legenda de forma precisa usando o comando. Desta forma ela será posicionada dentro do gráfico com o ponto central sendo o valor do argumento <code>legend.position</code>. Esses valores são definidos de forma que o ponto (0,0) seja o canto inferior esquerdo e (1,1) seja o canto superior direito.</p>
<pre class="r"><code>bp + theme(legend.position=c(.5, .5))</code></pre>
<p><img src="#####../content/visualizacao/legendas-ggplot2_files/figure-html/unnamed-chunk-12-1.png" width="60%" height="60%" /></p>
</div>


<!-- BLOGDOWN-HEAD




/BLOGDOWN-HEAD -->
